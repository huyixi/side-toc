(()=>{"use strict";var n,e={338:(n,e,t)=>{t.d(e,{A:()=>l});var o=t(258),a=t.n(o),r=t(163),i=t.n(r)()(a());i.push([n.id,':root {\n  --panel-text: #0f172a;\n  --muted-text: #64748b;\n  --border: #e2e8f0;\n  --accent: #2563eb;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  padding: 10px;\n  color: var(--panel-text);\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;\n}\n\n.panel-root {\n  background: transparent;\n  border: 0;\n  border-radius: 0;\n  padding: 0;\n}\n\n.panel-root-compact .toc-link {\n  padding-top: 3px;\n  padding-bottom: 3px;\n}\n\n.panel-header {\n  margin-bottom: 8px;\n  padding-bottom: 0;\n  border-bottom: 0;\n}\n\n.panel-title {\n  margin: 0;\n  font-size: 1rem;\n  line-height: 1.3;\n  font-weight: 600;\n}\n\n.panel-meta {\n  margin: 4px 0 0;\n  color: var(--muted-text);\n  font-size: 0.78rem;\n}\n\n.panel-state {\n  margin: 0;\n  color: var(--muted-text);\n  font-size: 0.9rem;\n}\n\n.panel-state-error {\n  color: #b91c1c;\n}\n\n.toc-nav {\n  margin-top: 4px;\n}\n\n.heading-tree-x {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.heading-tree-nested {\n  margin-top: 2px;\n  margin-left: 8px;\n  padding-left: 8px;\n  border-left: 1px solid var(--border);\n}\n\n.toc-item {\n  margin: 0;\n  padding: 0;\n}\n\n.toc-link {\n  display: block;\n  width: 100%;\n  border-radius: 4px;\n  padding: 2px 4px;\n  color: #111827;\n  text-decoration: none;\n  font-size: 0.9rem;\n  line-height: 1.35;\n}\n\n.toc-link:hover {\n  text-decoration: underline;\n}\n\n.toc-link-active {\n  color: var(--accent);\n  font-weight: 600;\n}\n\n.toc-link:focus-visible {\n  outline: 2px solid var(--accent);\n  outline-offset: 1px;\n}\n\n.toc-label {\n  word-break: break-word;\n}\n\n.options-root {\n  max-width: 680px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.options-title {\n  margin: 0;\n  font-size: 1.3rem;\n  line-height: 1.3;\n}\n\n.options-card {\n  background: var(--surface);\n  border: 1px solid var(--border);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.option-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 12px 14px;\n  border-bottom: 1px solid #edf2f7;\n}\n\n.option-row:last-child {\n  border-bottom: 0;\n}\n\n.option-text {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n\n.option-help {\n  color: var(--muted-text);\n  font-size: 0.86rem;\n}\n\n.option-row input[type="checkbox"] {\n  width: 18px;\n  height: 18px;\n}\n\n.option-row select {\n  min-width: 100px;\n  padding: 6px 8px;\n  border: 1px solid #cbd5e1;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  background: #fff;\n}\n\n.option-row select:focus-visible,\n.option-row input[type="checkbox"]:focus-visible,\n.btn:focus-visible {\n  outline: 2px solid var(--accent);\n  outline-offset: 2px;\n}\n\n.options-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.btn {\n  border-radius: 8px;\n  border: 1px solid #cbd5e1;\n  padding: 7px 12px;\n  font-size: 0.9rem;\n  cursor: pointer;\n  background: #fff;\n}\n\n.btn:disabled {\n  cursor: not-allowed;\n  opacity: 0.65;\n}\n\n.btn-primary {\n  background: var(--accent);\n  border-color: var(--accent);\n  color: #fff;\n}\n\n.btn-secondary:hover:not(:disabled) {\n  background: #f1f5f9;\n}\n\n.options-status {\n  color: var(--muted-text);\n  font-size: 0.88rem;\n}\n\n@media (max-width: 560px) {\n  .option-row {\n    align-items: flex-start;\n    flex-direction: column;\n  }\n\n  .option-row select {\n    width: 100%;\n  }\n}\n',""]);const l=i},9:(n,e,t)=>{var o=t(758),a=t(576),r=t(741),i=t.n(r),l=t(386),d=t.n(l),s=t(658),c=t.n(s),p=t(533),m=t.n(p),g=t(369),u=t.n(g),f=t(750),h=t.n(f),b=t(338),x={};x.styleTagTransform=h(),x.setAttributes=m(),x.insert=c().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=u(),i()(b.A,x),b.A&&b.A.locals&&b.A.locals;const v={includeH1:!1,maxDepth:6,smoothScroll:!0,compactMode:!1};function y(n){return n.reduce(((n,e)=>n+1+y(e.Children)),0)}(0,a.H)(document.getElementById("root")).render(o.createElement(o.StrictMode,null,o.createElement((()=>{const[n,e]=(0,o.useState)([]),[t,a]=(0,o.useState)(""),[r,i]=(0,o.useState)("loading"),[l,d]=(0,o.useState)(""),[s,c]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1);function g(n,e){chrome.tabs.query({active:!0,currentWindow:!0},(([t])=>{t.id?chrome.tabs.sendMessage(t.id,n,(()=>{const n=chrome.runtime.lastError;if(n){if((t=n.message)&&(t.includes("A listener indicated an asynchronous response")||t.includes("The message port closed before a response was received")))return;null==e||e()}var t})):null==e||e()}))}(0,o.useEffect)((()=>{const n=n=>{n&&("sendPageInfo"===n.action&&function(n){const t="string"==typeof n.title&&n.title.trim()?n.title.trim():"Untitled page",o=Array.isArray(n.nestedHeadings)?n.nestedHeadings:[];e(o),a(t),i(o.length>0?"ready":"empty"),d("")}({title:n.title,nestedHeadings:n.nestedHeadings}),"activeHeadingChanged"===n.action&&c("string"==typeof n.headingId?n.headingId:""))},t=(n,e)=>{"sync"===e&&n.compactMode&&m(Boolean(n.compactMode.newValue))};return chrome.runtime.onMessage.addListener(n),chrome.storage.onChanged.addListener(t),chrome.storage.sync.get(v,(n=>{m(Boolean(n.compactMode))})),i("loading"),d(""),g({action:"updateSidePanel"},(()=>{i("error"),d("This page cannot be scanned (for example Chrome internal pages).")})),()=>{chrome.runtime.onMessage.removeListener(n),chrome.storage.onChanged.removeListener(t)}}),[]);const u=({data:n,depth:e=0})=>Array.isArray(n)&&0!==n.length?o.createElement("ul",{className:"heading-tree-x "+(e>0?"heading-tree-nested":"")},n.map((n=>{const t=s===n.id;return o.createElement("li",{className:"toc-item",key:n.id},o.createElement("a",{className:"toc-link "+(t?"toc-link-active":""),"aria-current":t?"location":void 0,href:`#${n.id}`,onClick:e=>{e.preventDefault(),c(n.id),g({action:"scrollToHeading",headingId:n.id},(()=>{i("error"),d("Could not connect to the page. Reload the tab and try again.")}))}},o.createElement("span",{className:"toc-label"},n.text)),n.Children.length>0&&o.createElement(u,{data:n.Children,depth:e+1}))}))):null,f=y(n);return o.createElement("div",{className:"panel-root "+(p?"panel-root-compact":"")},o.createElement("header",{className:"panel-header"},o.createElement("h1",{className:"panel-title"},t||"Table of Contents"),"ready"===r&&o.createElement("p",{className:"panel-meta"},f," ",1===f?"heading":"headings")),"loading"===r&&o.createElement("p",{className:"panel-state"},"Loading headings..."),"empty"===r&&o.createElement("p",{className:"panel-state"},"No headings found on this page."),"error"===r&&o.createElement("p",{className:"panel-state panel-state-error"},l||"Unable to read this page."),"ready"===r&&o.createElement("nav",{className:"toc-nav","aria-label":"Table of contents"},o.createElement(u,{data:n})))}),null)))}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,n=[],o.O=(e,t,a,r)=>{if(!t){var i=1/0;for(c=0;c<n.length;c++){for(var[t,a,r]=n[c],l=!0,d=0;d<t.length;d++)(!1&r||i>=r)&&Object.keys(o.O).every((n=>o.O[n](t[d])))?t.splice(d--,1):(l=!1,r<i&&(i=r));if(l){n.splice(c--,1);var s=a();void 0!==s&&(e=s)}}return e}r=r||0;for(var c=n.length;c>0&&n[c-1][2]>r;c--)n[c]=n[c-1];n[c]=[t,a,r]},o.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return o.d(e,{a:e}),e},o.d=(n,e)=>{for(var t in e)o.o(e,t)&&!o.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n={796:0};o.O.j=e=>0===n[e];var e=(e,t)=>{var a,r,[i,l,d]=t,s=0;if(i.some((e=>0!==n[e]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(d)var c=d(o)}for(e&&e(t);s<i.length;s++)r=i[s],o.o(n,r)&&n[r]&&n[r][0](),n[r]=0;return o.O(c)},t=self.webpackChunkside_toc=self.webpackChunkside_toc||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),o.nc=void 0;var a=o.O(void 0,[121],(()=>o(9)));a=o.O(a)})();